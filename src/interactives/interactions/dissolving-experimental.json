{
  "title": "Dissolving Experimental",
  "publicationStatus": "draft",
  "labEnvironment": "production",
  "aspectRatio": 0.95,
  "models": [
    {
      "type": "md2d",
      "id": "salt",
      "url": "models/lab-version/1/md2d/interactions/dissolving-experimental/model.json",
      "viewOptions": {
        "controlButtons": "play_reset"
      },
      "onLoad": [
        "setComponentDisabled('red-charge', false);",
        "setComponentDisabled('green-charge', false);",
        "set('targetTemperature', 1829);",
        "set('redEpsilon', 0.317);",
        "set('greenEpsilon', 0.317);"
      ]
    }
  ],
  "parameters": [
    {
      "name": "minCharge",
      "initialValue": 1000,
      "onChange": [
        "if (get('redCharge') !== get('greenCharge')) {",
        "  setPairwiseLJProperties(0, 2, {epsilon: -0.2});",
        "} else {",
        "  (get('redCharge') === 1 ? setPairwiseLJProperties(0, 2, {epsilon: -0.1}) : setPairwiseLJProperties(0, 2, {epsilon: -0.317}));",
        "}",
        "(get('redCharge') === 1) ? set('redEpsilon', 0.1) : set('redEpsilon',0.317);",
        "(get('greenCharge') === 1) ? set('greenEpsilon', 0.1) : set('greenEpsilon',0.317);"       
      ]
    },
    {
      "name": "greenCharge",
      "initialValue": 0.0001,
      "onChange": [
        "batch(function () {",
        "  var count = getNumberOfAtoms();",
        "  for (var i = 0; i < count; i++) {",
        "    var a = getAtomProperties(i);",
        "    if (a.element === 0) {",
        "      setAtomProperties(i, {charge: a.charge < 0 ? -1 * value : value});",
        "    }",
        "  }",
        "set('minCharge', Math.min(value, get('redCharge')));",
        "});"
      ]
    },
    {
      "name": "redCharge",
      "initialValue": 0.0001,
      "onChange": [
        "batch(function () {",
        "  var count = getNumberOfAtoms();",
        "  for (var i = 0; i < count; i++) {",
        "    var a = getAtomProperties(i);",
        "    if (a.element === 2) {",
        "      setAtomProperties(i, {charge: a.charge < 0 ? -1 * value : value});",
        "    }",
        "  }",
        "set('minCharge', Math.min(value, get('greenCharge')));",
        "});"
      ]
    },
    {
      "name": "fastForward",
      "initialValue": false,
      "onChange": "set('timeStep', value ? 7 : 1);"
    },
    {
      "name": "greenEpsilon",
      "initialValue": 0.1,
      "onChange": ["setElementProperties(0, { epsilon: -value });"
        ]
    },
    {
      "name": "redEpsilon",
      "initialValue": 0.1,
      "onChange": "setElementProperties(2, { epsilon: -value });"
    }
  ],
  "filteredOutputs": [],
  "components": [
    {
      "type": "checkbox",
      "id": "show-shading",
      "text": "Show charge shading",
      "property": "chargeShading"
    },
    {
      "type": "checkbox",
      "id": "show-interactions",
      "text": "Show interactions between atoms",
      "property": "showVDWLines"
    },
    {
      "type": "slider",
      "id": "red-charge",
      "property": "redCharge",
      "min": 0.0001,
      "max": 1.0,
      "steps": 2,
      "title": "Set polarity of red molecules",
      "labels": [
        {
          "value": 0.001,
          "label": "none"
        },
        {
          "value": 0.5,
          "label": "medium"
        },
        {
          "value": 1.0,
          "label": "high"
        }
      ],
      "width": "20em"
    },
    {
      "type": "slider",
      "id": "green-charge",
      "property": "greenCharge",
      "min": 0.0001,
      "max": 1.0,
      "steps": 2,
      "title": "Set polarity of green molecules",
      "labels": [
        {
          "value": 0.001,
          "label": "none"
        },
        {
          "value": 0.5,
          "label": "medium"
        },
        {
          "value": 1.0,
          "label": "high"
        }
      ],
      "width": "20em"
    },
    {
      "type": "checkbox",
      "id": "fast-forward",
      "text": "Fast forward",
      "property": "fastForward"
    },
    {
      "type": "slider",
      "id": "target-temp",
      "property": "targetTemperature",
      "min": 1,
      "max": 3000,
      "steps": 199,
      "title": "Target temperature",
      "displayValue": "return value.toFixed(0)",
      "labels": [
        {
          "value": 1,
          "label": "1"
        },
        {
          "value": 3000,
          "label": "3000"
        }
      ],
      "width": "20em"
    },
    {
      "type": "slider",
      "id": "epsilon-slider1",
      "min": 0.075,
      "max": 2,
      "displayValue": "return format('.3f')(value)",
      "labels": [
        {
          "value": 0.075,
          "label": "Weak"
        },
        {
          "value": 2,
          "label": "Strong"
        }
      ],
      "steps": 199,
      "title": "Green VDW",
      "property": "greenEpsilon"
    },
    {
      "type": "slider",
      "id": "epsilon-slider2",
      "min": 0.075,
      "max": 2,
      "displayValue": "return format('.3f')(value)",
      "labels": [
        {
          "value": 0.075,
          "label": "Weak"
        },
        {
          "value": 2,
          "label": "Strong"
        }
      ],
      "steps": 199,
      "title": "Red VDW",
      "property": "redEpsilon"
    }
  ],
  "layout": {
    "bottom": [
      ["show-shading", "show-interactions"],
      ["red-charge"],
      ["green-charge"],
      ["fast-forward"],
      ["target-temp"],
      ["epsilon-slider1","epsilon-slider2"]
    ],
    "right": []
  },
  "template": [
    {
      "id": "right",
      "top": "model.top",
      "bottom": "model.bottom",
      "left": "model.right",
      "padding-left": "1em",
      "padding-right": "1em"
    },
    {
      "id": "bottom",
      "top": "right.bottom",
      "left": "model.left",
      "width": "interactive.width",
      "padding-top": "0.5em"
    }
  ]
}
