{
  "title": "Dissolving Experimental",
  "publicationStatus": "draft",
  "labEnvironment": "production",
  "aspectRatio": 0.95,
  "models": [
    {
      "type": "md2d",
      "id": "salt",
      "url": "models/lab-version/1/md2d/interactions/dissolving-experimental/model.json",
      "viewOptions": {
        "controlButtons": "play_reset"
      },
      "onLoad": [
        "setComponentDisabled('red-charge', false);",
        "setComponentDisabled('green-charge', false);",
        "onStart(function () {",
        "  setComponentDisabled('red-charge', true);",
        "  setComponentDisabled('green-charge', true);",
        "});"
      ]
    }
  ],
  "parameters": [
    {
      "name": "minCharge",
      "initialValue": 1000,
      "onChange": [
        "var temp = 400;",
        "if (value > 0.4) temp = 650;",
        "if (value > 0.8) temp = 1500;",
        "set('targetTemperature', temp)"
      ]
    },
    {
      "name": "greenCharge",
      "initialValue": 0.5,
      "onChange": [
        "batch(function () {",
        "  var count = getNumberOfAtoms();",
        "  for (var i = 0; i < count; i++) {",
        "    var a = getAtomProperties(i);",
        "    if (a.element === 0) {",
        "      setAtomProperties(i, {charge: a.charge < 0 ? -1 * value : value});",
        "    }",
        "  }",
        "set('minCharge', Math.min(value, get('redCharge')));",
        "});"
      ]
    },
    {
      "name": "redCharge",
      "initialValue": 0.5,
      "onChange": [
        "batch(function () {",
        "  var count = getNumberOfAtoms();",
        "  for (var i = 0; i < count; i++) {",
        "    var a = getAtomProperties(i);",
        "    if (a.element === 2) {",
        "      setAtomProperties(i, {charge: a.charge < 0 ? -1 * value : value});",
        "    }",
        "  }",
        "set('minCharge', Math.min(value, get('greenCharge')));",
        "});"
      ]
    },
    {
      "name": "fastForward",
      "initialValue": false,
      "onChange": "set('timeStep', value ? 7 : 1);"
    }
  ],
  "filteredOutputs": [
    {
      "name": "filteredPE",
      "property": "potentialEnergy"
    }
  ],
  "components": [
    {
      "type": "checkbox",
      "id": "show-shading",
      "text": "Show charge shading",
      "property": "chargeShading"
    },
    {
      "type": "checkbox",
      "id": "show-interactions",
      "text": "Show interactions between atoms",
      "property": "showVDWLines"
    },
    {
      "type": "slider",
      "id": "red-charge",
      "property": "redCharge",
      "min": 0.0001,
      "max": 1.0,
      "steps": 2,
      "title": "Set polarity of red molecules",
      "labels": [
        {
          "value": 0.001,
          "label": "none"
        },
        {
          "value": 0.5,
          "label": "medium"
        },
        {
          "value": 1.0,
          "label": "high"
        }
      ],
      "width": "20em"
    },
    {
      "type": "slider",
      "id": "green-charge",
      "property": "greenCharge",
      "min": 0.0001,
      "max": 1.0,
      "steps": 2,
      "title": "Set polarity of green molecules",
      "labels": [
        {
          "value": 0.001,
          "label": "none"
        },
        {
          "value": 0.5,
          "label": "medium"
        },
        {
          "value": 1.0,
          "label": "high"
        }
      ],
      "width": "20em"
    },
    {
      "type": "checkbox",
      "id": "fast-forward",
      "text": "Fast forward",
      "property": "fastForward"
    },
    {
      "type": "slider",
      "id": "target-temp",
      "property": "targetTemperature",
      "min": 1,
      "max": 2000,
      "steps": 199,
      "title": "Target temperature",
      "displayValue": "return value.toFixed(0)",
      "labels": [
        {
          "value": 1,
          "label": "1"
        },
        {
          "value": 2000,
          "label": "2000"
        }
      ],
      "width": "20em"
    }
  ],
  "layout": {
    "bottom": [
      ["show-shading", "show-interactions"],
      ["red-charge"],
      ["green-charge"],
      ["fast-forward"],
      ["target-temp"]
    ],
    "right": []
  },
  "template": [
    {
      "id": "right",
      "top": "model.top",
      "bottom": "model.bottom",
      "left": "model.right",
      "padding-left": "1em",
      "padding-right": "1em"
    },
    {
      "id": "bottom",
      "top": "right.bottom",
      "left": "model.left",
      "width": "interactive.width",
      "padding-top": "0.5em"
    }
  ]
}
