{
  "title": "External Global Climate model",
  "publicationStatus": "draft",
  "subtitle": "This is an AgentScript model created by the HAS project",
  "about": "",
  "models": [
    {
      "type": "iframe-model",
      "id": "iframe-model",
      "url": "models/lab-version/1/iframe-model/iframe-model.json",
      "modelOptions":{
        "url": "http://localhost:8000/global-climate/lab-embeddable.html",
        "albedo": 0,
        "sunBrightness": 200,
        "animRate": 60,
        "showGases": true,
        "showRays": true,
        "showHeat": true,
        "hide90": false
      },
      "viewOptions": {
        "controlButtons": "play_reset"
      }
    }
  ],
  "aspectRatio": 1.25,
  "outputs": [
    {
      "name": "year",
      "label": "Year",
      "format": "d",
      "unitName": "Year",
      "value": "return iframeOutput('year');"
    },
    {
      "name": "temperatureChange",
      "label": "Temperature Change",
      "format": "3.1f",
      "unitName": "degrees Celsius",
      "unitAbbreviation": "°C",
      "value": "return iframeOutput('temperatureChange');"
    },
    {
      "name": "co2Concentration",
      "label": "CO₂ Concentration",
      "format": "3.0f",
      "unitName": "",
      "unitAbbreviation": "",
      "value": "return iframeOutput('co2Concentration');"
    }
  ],
  "components": [
    {
      "type": "graph",
      "id": "temperatureGraph",
      "title": "Temperature Change",
      "xlabel": "Time (year)",
      "ylabel": "Temperature (°C)",
      "xmin": 2013,
      "xmax": 2020,
      "ymin": -5,
      "ymax": 10,
      "xTickCount": 4,
      "yTickCount": 5,
      "xFormatter": "d",
      "properties": ["temperatureChange"],
      "xProperty": "year",
      "resetAxesOnReset": true,
      "height": "100%"
    },
    {
      "type": "graph",
      "id": "co2Graph",
      "title": "CO₂ in Atmosphere",
      "xlabel": "Time (year)",
      "ylabel": "Concentration",
      "xmin": 2013,
      "xmax": 2020,
      "ymin": 0,
      "ymax": 100,
      "xTickCount": 4,
      "yTickCount": 5,
      "xFormatter": "d",
      "properties": ["co2Concentration"],
      "xProperty": "year",
      "resetAxesOnReset": true,
      "height": "100%"
    },
    {
      "type": "slider",
      "id": "speedSlider",
      "title": "Simulation Speed",
      "min": 20,
      "max": 60,
      "steps": 10,
      "property": "animRate",
      "labels": [
        {
          "value": 20,
          "label": "slowest"
        },
        {
          "value": 60,
          "label": "fastest"
        }
      ],
      "width": "10em"
    },
    {
      "type": "checkbox",
      "id": "showGasesCheckbox",
      "text": "Show Gases",
      "property": "showGases"
    },
    {
      "type": "checkbox",
      "id": "showRaysCheckbox",
      "text": "Show Rays",
      "property": "showRays"
    },
    {
      "type": "checkbox",
      "id": "showHeatCheckbox",
      "text": "Show Heat",
      "property": "showHeat"
    },
    {
      "type": "button",
      "id": "addCo2Button",
      "text": "Add CO₂",
      "action": "addCO2();"
    },
    {
      "type": "button",
      "id": "removeCo2Button",
      "text": "Remove CO₂",
      "action": "subtractCO2();"
    },
    {
      "type": "numericOutput",
      "id": "co2NumericOutput",
      "property": "co2Concentration"
    },
    {
      "type": "numericOutput",
      "id": "temperatureNumericOutput",
      "property": "temperatureChange",
      "displayValue": "return format('3.1f')(value)"
    },
    {
      "type": "slider",
      "id": "albedoSlider",
      "title": "Albedo",
      "min": 0,
      "max": 1,
      "steps": 11,
      "labels": [
        {
          "value": 0,
          "label": "0"
        },
        {
          "value": 1,
          "label": "1"
        }
      ],
      "width": "7em",
      "property": "albedo"
    },
    {
      "type": "slider",
      "id": "sunBrightnessSlider",
      "title": "Sun Brightness",
      "min": 0,
      "max": 200,
      "steps": 11,
      "labels": [
        {
          "value": 0,
          "label": "none"
        },
        {
          "value": 200,
          "label": "high"
        }
      ],
      "width": "7em",
      "property": "sunBrightness"
    },
    {
      "type": "button",
      "id": "addCloudButton",
      "text": "Add Cloud",
      "action": "addCloud();"
    },
    {
      "type": "button",
      "id": "removeCloudButton",
      "text": "Remove Cloud",
      "action": "subtractCloud();"
    },
    {
      "type": "button",
      "id": "followEnergyButton",
      "text": "Follow Energy Packet",
      "action": "addSunraySpotlight();"
    },
    {
      "type": "button",
      "id": "followCo2Button",
      "text": "Follow CO₂",
      "action": "addCO2Spotlight();"
    },
    {
      "type": "button",
      "id": "hide90Button",
      "text": "Hide 90% of Elements",
      "action": "set('hide90', !get('hide90'));"
    },
    {
      "type": "button",
      "id": "eruptButton",
      "text": "Erupt!",
      "action": "erupt();"
    }
  ],
  "layout": {
    "rightTop": [
      "temperatureGraph"
    ],
    "rightBottom": [
      "co2Graph"
    ],
    "belowModel": [
      [
        "co2NumericOutput",
        "temperatureNumericOutput"
      ],
      [
        "speedSlider",
        "showGasesCheckbox",
        "showRaysCheckbox",
        "showHeatCheckbox"
      ],
      [
        "albedoSlider",
        "sunBrightnessSlider",
        "addCo2Button",
        "removeCo2Button",
        "addCloudButton",
        "removeCloudButton"
      ],
      [
        "followEnergyButton",
        "followCo2Button"
      ]
    ]
  },
  "template": [
    {
      "id": "rightTop",
      "left": "model.right",
      "width": "0.5 * model.width",
      "height": "0.5 * model.height"
    },
    {
      "id": "rightBottom",
      "left": "model.right",
      "top": "rightTop.bottom",
      "width": "0.5 * model.width",
      "height": "0.5 * model.height"
    },
    {
      "id": "belowModel",
      "top": "model.bottom",
      "width": "interactive.width",
      "fontScale": 0.7
    }
  ]
}