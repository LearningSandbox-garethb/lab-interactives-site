{
  "title": "Air Pollution - Aerial",
  "publicationStatus": "draft",
  "subtitle": "Air Pollution - Aerial",
  "helpOnLoad": false,
  "about": "TODO",
  "theme": "has",
  "aspectRatio": 1.7,
  "fontScale": 0.8,
  "models": [
    {
      "type": "iframe-model",
      "id": "iframe-model",
      "url": "models/lab-version/1/iframe-model/iframe-model.json",
      "modelOptions":{
        "url": "//models-resources.concord.org/agentscript/air-pollution-aerial/lab-embeddable.html",
        "wind": {
          "magnitude": 0,
          "direction": 0
        }
      },
      "viewOptions": {
        "controlButtons": "play_reset"
      },
      "onLoad": [
      ]
    }
  ],
  "parameters": [
  ],
  "outputs": [
    {
      "name": "cityAQuality",
      "value": "return iframeOutput('cityAQuality');"
    },
    {
      "name": "cityBQuality",
      "value": "return iframeOutput('cityBQuality');"
    },
    {
      "name": "cityCQuality",
      "value": "return iframeOutput('cityCQuality');"
    }
  ],
  "helpTips": [
    {
      "component": "",
      "text": ["#How do I use this model?",
      "---",
      "Click on the model to add up to four power plants.",
      "",
      "",
      "Use the wind control to change the wind speed and direction.",
      "",
      "",
      "You can hover over the controls for more information. Click to close this window."
       ]
    }
  ],
  "components": [
    {
      "id": "instructions",
      "type": "text",
      "text": "Click on the model to add up to four power plants.",
      "width": "auto",
      "height": "auto",
      "tooltip": ""
    },
    {
      "id": "airQualityPlaceholder",
      "type": "text",
      "text": "Air Quality",
      "width": "auto",
      "height": "0.7em",
      "tooltip": ""
    },
    {
      "id": "scale",
      "type": "div",
      "content": [
        "<div id='air-quality-scale' style='width: 6em; height: 9.1em; padding: 0.5em; margin-left: 1em; border: 2px solid #BBBBBB;'>",
        "  <div id='scale' style='height: 100%; width: 25%; background: #ff3232; background: -moz-linear-gradient(top,  #ff3232 0%, #edf72e 50%, #2aff00 100%); background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ff3232), color-stop(50%,#edf72e), color-stop(100%,#2aff00)); background: -webkit-linear-gradient(top,  #ff3232 0%,#edf72e 50%,#2aff00 100%); background: -o-linear-gradient(top,  #ff3232 0%,#edf72e 50%,#2aff00 100%); background: -ms-linear-gradient(top,  #ff3232 0%,#edf72e 50%,#2aff00 100%); background: linear-gradient(to bottom,  #ff3232 0%,#edf72e 50%,#2aff00 100%); filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ff3232', endColorstr='#2aff00',GradientType=0 );'></div>",
        "  <span id='poor' style='position: absolute; top: 0.5em; left: 50%;'>Poor</span>",
        "  <span id='fair' style='position: absolute; top: 45%; left: 50%;'>Fair</span>",
        "  <span id='good' style='position: absolute; bottom: 0.5em; left: 50%;'>Good</span>",
        "</div>"
      ],
      "width": "auto",
      "height": "auto",
      "tooltip": ""
    },
    {
      "id": "windJoystick",
      "type": "joystick",
      "title": "Wind",
      "property": "wind",
      "scale": 30,
      "width": "auto",
      "height": "auto",
      "tooltip": "",
      "displayValue":[
        "var speed = Math.round(value.magnitude),",
        "    out = '' + speed + ' MPH';",
        "if (speed >= 1) {",
        "  out += ' from the ' + getCardinalDirection(value.direction, true);",
        "}",
        "return out;"
      ]
    },
    {
      "id": "city-a-aq",
      "type": "colorIndicator",
      "property": "cityAQuality",
      "title": "City A",
      "width": "auto",
      "height": "auto",
      "colorValue": "return 'hsl('+value+',100%,50%)';",
      "tooltip": "",
      "helpIcon": false
    },
    {
      "id": "city-b-aq",
      "type": "colorIndicator",
      "property": "cityBQuality",
      "title": "City B",
      "width": "auto",
      "height": "auto",
      "colorValue": "return 'hsl('+value+',100%,50%)';",
      "tooltip": "",
      "helpIcon": false
    },
    {
      "id": "city-c-aq",
      "type": "colorIndicator",
      "property": "cityCQuality",
      "title": "City C",
      "width": "auto",
      "height": "auto",
      "colorValue": "return 'hsl('+value+',100%,50%)';",
      "tooltip": "",
      "helpIcon": false
    }
  ],
  "layout": {
    "belowModel": [
      ["instructions"]
    ],
    "rightTop": [
      ["airQualityPlaceholder"],
      ["city-a-aq"],
      ["city-b-aq"],
      ["city-c-aq"]
    ],
    "rightRightTop": [
      "scale"
    ],
    "rightBottom": [
      ["windJoystick"]
    ]
  },
  "template": [
    {
      "id": "belowModel",
      "top": "model.bottom",
      "left": "model.left",
      "width": "model.width",
      "height": "1em",
      "padding-left": "1em"
    },
    {
      "id": "rightBottom",
      "left": "model.right",
      "bottom": "model.bottom",
      "width": "0.3 * model.width",
      "height": "interactive.height / 2",
      "padding-left": "0.5em"
    },
    {
      "id": "rightRightTop",
      "right": "interactive.right",
      "top": "model.top",
      "width": "0.3 * model.width",
      "height": "interactive.height / 2",
      "padding-top": "1.7em",
      "padding-bottom": "1em",
      "padding-left": "0.5em"
    },
    {
      "id": "rightTop",
      "left": "model.right",
      "top": "model.top",
      "width": "0.3 * model.width",
      "height": "interactive.height / 2",
      "padding-bottom": "1em",
      "padding-left": "0.5em"
    }
  ]
}
